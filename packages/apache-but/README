# How to build mod_but, mod_security and apache on debian wheezy
apt-get install libapr1 libapr1-dev
apt-get install libc6-dev-i386 libssl-dev
apt-get install libc6-dev-i386 libssl-dev
Cd to: HackingLabLCD/packages/apache_but/httpd-2.4.6:
HackingLabLCD/packages/apache_but/httpd-2.4.6# CFLAGS="-m32" CXXFLAGS="-m32" ./configure --prefix=/opt/apache_but/httpd/ --enable-substitute --enable-sed --enable-ssl --enable-proxy --enable-rewrite --enable-expires --enable-remoteip --enable-rewrite --enable-so --enable-log-forensic --with-included-apr --with-included-apr-util --with-included-apr-icon


the files:
 * http://svn.apache.org/repos/asf/httpd/httpd/trunk/modules/cache/cache_disk_common.h
 * http://svn.apache.org/repos/asf/httpd/httpd/trunk/modules/cache/cache_common.h 
are missing in REL's package which leads to a broken source package 

apt-get install libapr1 libapr1-dev libc6-dev libssl-dev bison flex  make build-essential libpcre3-dev  libpcre3
apt-get install libapache2-mod-perl2-dev libapache2-mod-perl2
cd apache_but/httpd-2.4.6/
./configure --prefix="/opt/apache_but/httpd/" --enable-substitute --enable-sed --enable-ssl --enable-proxy --enable-rewrite --enable-expires --enable-remoteip --enable-rewrite --enable-so --enable-log-forensic --with-included-apr --with-included-apr-util --with-included-apr-iconv --with-included-pcre --enable-perl --enable-cache --enable-disk-cache
make
make install
cd ../mod_but/ 
apxs=`which /opt/apache_but/httpd/bin/apxs "$APXS"`
cd mod_but/trunk/modules/mod_but
make APXS="$apxs" APXSFLAGS="-c -i -a -Wc,-O0 -Wc,-Wall -Wc,-DMOD_BUT_SESSION_COUNT=10 -Wc,-DMOD_BUT_COOKIESTORE_COUNT=30 "
cd ../modsecurity*
apt-get install apache2-prefork-dev
apt-get install libxml2-dev automake curl
apt-get install libcurl4-openssl-dev
curl-config --libs
./configure --prefix=/opt/apache_but/mod_security
automake --add-missing
make
make install

##########################################################################################################
##########################################################################################################

	                 uuuuuuu
        	     uu$$$$$$$$$$$uu
	          uu$$$$$$$$$$$$$$$$$uu
	         u$$$$$$$$$$$$$$$$$$$$$u
	        u$$$$$$$$$$$$$$$$$$$$$$$u
	       u$$$$$$$$$$$$$$$$$$$$$$$$$u
	       u$$$$$$$$$$$$$$$$$$$$$$$$$u
	       u$$$$$$"   "$$$"   "$$$$$$u
	       "$$$$"      u$u       $$$$"
	        $$$u       u$u       u$$$
	        $$$u      u$$$u      u$$$
	         "$$$$uu$$$   $$$uu$$$$"
	          "$$$$$$$"   "$$$$$$$"
	            u$$$$$$$u$$$$$$$u
	             u$"$"$"$"$"$"$u
	  uuu        $$u$ $ $ $ $u$$       uuu
	 u$$$$        $$$$$u$u$u$$$       u$$$$
	  $$$$$uu      "$$$$$$$$$"     uu$$$$$$      do not ever touch this package
	u$$$$$$$$$$$uu    """""    uuuu$$$$$$$$$$		unless you really know what you are doing
	$$$$"""$$$$$$$$$$uuu   uu$$$$$$$$$"""$$$"
	 """      ""$$$$$$$$$$$uu ""$"""
	           uuuu ""$$$$$$$$$$uuu
	  u$$$uuu$$$$$$$$$uu ""$$$$$$$$$$$uuu$$$
	  $$$$$$$$$$""""           ""$$$$$$$$$$$"
	   "$$$$$"                      ""$$$$""
	     $$$"                         $$$$"

##########################################################################################################
##########################################################################################################

# Apache
1. Copy apr and Co. to srclib

./configure --prefix=/opt/apache_but/httpd/ --enable-substitute --enable-sed --enable-ssl --enable-proxy --enable-rewrite --enable-expires --enable-remoteip --enable-rewrite --enable-so --enable-log-forensic --with-included-apr --with-included-apr-util --with-included-apr-icon

# Mod_But
make APXS="/opt/apache_but/httpd/bin/apxs" APXSFLAGS="-c -i -a -Wc,-O0 -Wc,-Wall -Wc,-DMOD_BUT_SESSION_COUNT=10 -Wc,-DMOD_BUT_COOKIESTORE_COUNT=30"




----------------------
compile 32bit mod_but on debian 32bit:
root@livecd-ng:/home/hacker/# apt-get install libc6-dev-i386 libssl-dev
root@livecd-ng:/home/hacker/# apt-get install libc6-dev-i386 libssl-dev
root@livecd-ng:/home/hacker/# cd HackingLabLCD/packages/apache_but/httpd-2.4.6
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6# CFLAGS="-m32" CXXFLAGS="-m32" ./configure --prefix=/opt/apache_but/httpd/ --enable-substitute --enable-sed --enable-ssl --enable-proxy --enable-rewrite --enable-expires --enable-remoteip --enable-rewrite --enable-so --enable-log-forensic --with-included-apr --with-included-apr-util --with-included-apr-iconv
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6# make install
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6/srclib# make
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6/srclib# cd ..
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6# CFLAGS="-m32" CXXFLAGS="-m32" ./configure --prefix=/opt/apache_but/httpd/ --enable-substitute --enable-sed --enable-ssl --enable-proxy --enable-rewrite --enable-expires --enable-remoteip --enable-rewrite --enable-so --enable-log-forensic --with-included-apr --with-included-apr-util --with-included-apr-iconv
root@livecd-ng:/home/hacker/HackingLabLCD/packages/apache_but/httpd-2.4.6# make install
